<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Advent of Code 2015: Day 21: RPG Simulator 20XX"><title>aoc_2015_day_21 - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceSerif4-Regular-46f98efaafac5295.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceSerif4-Bold-a2c9cd1067f8b328.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../static.files/rustdoc-ba5701c5741a7b69.css" id="mainThemeStyle"><div id="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="aoc_2015_day_21" data-themes="" data-resource-suffix="" data-rustdoc-version="1.71.0-nightly (9ecda8de8 2023-04-30)" data-search-js="search-618e954b235f6acc.js" data-settings-js="settings-de11bff964e9d4e5.js" data-settings-css="settings-6f6ffb5395b17c6e.css" data-theme-light-css="light-0f8c037637f9eb3e.css" data-theme-dark-css="dark-1097f8e92a01e3cf.css" data-theme-ayu-css="ayu-614652228113ac93.css" ></div><script src="../static.files/storage-62ce34ea385b278a.js"></script><script defer src="../crates.js"></script><script defer src="../static.files/main-f0540c1d82cde29b.js"></script><noscript><link rel="stylesheet" media="(prefers-color-scheme:light)" href="../static.files/light-0f8c037637f9eb3e.css"><link rel="stylesheet" media="(prefers-color-scheme:dark)" href="../static.files/dark-1097f8e92a01e3cf.css"><link rel="stylesheet" href="../static.files/noscript-13285aec31fa243e.css"></noscript><link rel="alternate icon" type="image/png" href="../static.files/favicon-16x16-8b506e7a72182f1c.png"><link rel="alternate icon" type="image/png" href="../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc mod crate"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="logo-container" href="../aoc_2015_day_21/index.html"><img class="rust-logo" src="../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><h2></h2></nav><nav class="sidebar"><a class="logo-container" href="../aoc_2015_day_21/index.html"><img class="rust-logo" src="../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><h2 class="location"><a href="#">Crate aoc_2015_day_21</a></h2><div class="sidebar-elems"><ul class="block"><li class="version">Version 0.1.0</li><li><a id="all-types" href="all.html">All Items</a></li></ul><section><ul class="block"><li><a href="#modules">Modules</a></li><li><a href="#functions">Functions</a></li></ul></section></div></nav><main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" title="help" tabindex="-1"><a href="../help.html">?</a></div><div id="settings-menu" tabindex="-1"><a href="../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../static.files/wheel-7b819b6101059cd0.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1>Crate <a class="mod" href="#">aoc_2015_day_21</a><button id="copy-path" title="Copy item path to clipboard"><img src="../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="srclink" href="../src/aoc_2015_day_21/lib.rs.html#1-68">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Advent of Code 2015: Day 21: RPG Simulator 20XX</p>
<p><a href="https://adventofcode.com/2015/day/21">https://adventofcode.com/2015/day/21</a></p>
<h2 id="input"><a href="#input">Input</a></h2>
<p>Boss stats for a simple turn based fight game, including hit points, damage and armour. For
example:</p>
<div class="example-wrap"><pre class="language-text"><code>Hit Points: 100
Damage: 10
Armor: 5
</code></pre></div><h2 id="part-one"><a href="#part-one">Part one</a></h2>
<p>What is the smallest amount of “gold” the player can spend and still defeat this boss? They
can choose to spend any combination of the following:</p>
<ul>
<li>Exactly one of: damage <code>+4</code> for <code>8</code>, damage <code>+5</code> for <code>10</code>, damage <code>+6</code> for <code>25</code>, damage <code>+7</code>
for <code>40</code>, damage <code>+8</code> for <code>74</code></li>
<li>Zero or one of: armour <code>+1</code> for <code>13</code>, armour <code>+2</code> for <code>31</code>, armour <code>+3</code> for <code>53</code>, armour
<code>+4</code> for <code>75</code>, armour <code>+5</code> for <code>102</code>.</li>
<li>Zero, one or two of: damage <code>+1</code> for <code>25</code>, damage <code>+2</code> for <code>50</code>, damage <code>+3</code> for <code>100</code>,
armour <code>+1</code> for <code>20</code>, armour <code>+2</code> for <code>40</code>, armour <code>+3</code> for <code>60</code>.</li>
</ul>
<p>To determine the winner the player and the boss take turns, player first, subtracting their
total damage, minus the opponent’s armour, from the opponent’s hit points. If the amount to be
subtracted is less than one then one is subtracted instead. The first party to reach zero hit
points is the loser.</p>
<h2 id="part-two"><a href="#part-two">Part two</a></h2>
<p>Same as part one, but what is the <em>most</em> that can be spent which results in a loss for the
player.</p>
<h2 id="algorithm"><a href="#algorithm">Algorithm</a></h2>
<p>We simplify the three types of item into a single table for each containing every option:</p>
<ul>
<li>With exactly one option this list is the same</li>
<li>To make this optional we add a free option with no stats</li>
<li>We include zero items, similar to the previous item, plus each option alone, plus each
combination of two options.</li>
</ul>
<p>We then iterate over the cartesian product of these three dimensions working out the resulting
stats and cost for the player. This is sorted according to the cost, in ascending order for
part one and descending order for part two. Then we simulate the battle as described until we
find a win for part one, or a lose for part two.</p>
</div></details><h2 id="modules" class="small-section-header"><a href="#modules">Modules</a></h2><ul class="item-table"><li><div class="item-name"><a class="mod" href="input/index.html" title="mod aoc_2015_day_21::input">input</a></div><div class="desc docblock-short">Data structures to model the puzzle input</div></li><li><div class="item-name"><a class="mod" href="logic/index.html" title="mod aoc_2015_day_21::logic">logic</a></div><div class="desc docblock-short">Logic for solving the puzzles.</div></li><li><div class="item-name"><a class="mod" href="model/index.html" title="mod aoc_2015_day_21::model">model</a></div><div class="desc docblock-short">Data structures and types</div></li></ul><h2 id="functions" class="small-section-header"><a href="#functions">Functions</a></h2><ul class="item-table"><li><div class="item-name"><a class="fn" href="fn.puzzle_metadata.html" title="fn aoc_2015_day_21::puzzle_metadata">puzzle_metadata</a></div></li></ul></section></div></main></body></html>