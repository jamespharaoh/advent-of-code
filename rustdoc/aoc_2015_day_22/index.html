<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Advent of Code 2015: Day 22: Wizard Simulator 20XX"><meta name="keywords" content="rust, rustlang, rust-lang, aoc_2015_day_22"><title>aoc_2015_day_22 - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceSerif4-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../FiraSans-Regular.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../FiraSans-Medium.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceCodePro-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceSerif4-Bold.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceCodePro-Semibold.ttf.woff2"><link rel="stylesheet" href="../normalize.css"><link rel="stylesheet" href="../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" href="../ayu.css" disabled><link rel="stylesheet" href="../dark.css" disabled><link rel="stylesheet" href="../light.css" id="themeStyle"><script id="default-settings" ></script><script src="../storage.js"></script><script defer src="../crates.js"></script><script defer src="../main.js"></script><noscript><link rel="stylesheet" href="../noscript.css"></noscript><link rel="alternate icon" type="image/png" href="../favicon-16x16.png"><link rel="alternate icon" type="image/png" href="../favicon-32x32.png"><link rel="icon" type="image/svg+xml" href="../favicon.svg"></head><body class="rustdoc mod crate"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="sidebar-logo" href="../aoc_2015_day_22/index.html"><div class="logo-container"><img class="rust-logo" src="../rust-logo.svg" alt="logo"></div></a><h2 class="location"></h2></nav><nav class="sidebar"><a class="sidebar-logo" href="../aoc_2015_day_22/index.html"><div class="logo-container"><img class="rust-logo" src="../rust-logo.svg" alt="logo"></div></a><h2 class="location"><a href="#">Crate aoc_2015_day_22</a></h2><div class="sidebar-elems"><ul class="block"><li class="version">Version 0.1.0</li><li><a id="all-types" href="all.html">All Items</a></li></ul><section><ul class="block"><li><a href="#modules">Modules</a></li><li><a href="#functions">Functions</a></li></ul></section></div></nav><main><div class="width-limiter"><div class="sub-container"><a class="sub-logo-container" href="../aoc_2015_day_22/index.html"><img class="rust-logo" src="../rust-logo.svg" alt="logo"></a><nav class="sub"><form class="search-form"><div class="search-container"><span></span><input class="search-input" name="search" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" title="help" tabindex="-1"><a href="../help.html">?</a></div><div id="settings-menu" tabindex="-1"><a href="../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../wheel.svg"></a></div></div></form></nav></div><section id="main-content" class="content"><div class="main-heading"><h1 class="fqn">Crate <a class="mod" href="#">aoc_2015_day_22</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../clipboard.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="srclink" href="../src/aoc_2015_day_22/lib.rs.html#1-71">source</a> · <a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class="inner">&#x2212;</span>]</a></span></div><details class="rustdoc-toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Advent of Code 2015: Day 22: Wizard Simulator 20XX</p>
<p><a href="https://adventofcode.com/2015/day/22">https://adventofcode.com/2015/day/22</a></p>
<h2 id="input"><a href="#input">Input</a></h2>
<p>Boss stats for a simple deterministic turn-based battle, inlcuding hit points and damage. For
example:</p>
<div class="example-wrap"><pre class="language-text"><code>Hit Points: 100
Damage: 10</code></pre></div><h2 id="part-one"><a href="#part-one">Part one</a></h2>
<p>Work out the minimum amount of “mana” that can be spent to win the battle. In the battle each
participant takes turns, starting with the player. The player must choose one of five spells
to cast, or loses immediately if they don’t have sufficient mana. The options are:</p>
<ul>
<li>Spend <code>53</code> mana to cause <code>4</code> damage.</li>
<li>Spend <code>73</code> mana to cause <code>2</code> damage and to heal <code>2</code> hit points.</li>
<li>Spend <code>113</code> mana to increase the player’s armour by <code>7</code> for six turns (three attacks).</li>
<li>Spend <code>173</code> mana to cause <code>3</code> damage at the start of the next six turns.</li>
<li>Spend <code>229</code> mana to gain <code>101</code> mana at the start of the next five turns.</li>
</ul>
<p>The multi-turn spells cannot be repeated until their effect has worn off. When it is the
boss’s turn they will cause the amount of damage indicated in the puzzle input. Damage is
subtracted from the opponent’s hit points, minus any amour from the player’s spell, or one is
subtracted if the amount would be less.</p>
<p>The first participant to reach zero hit points loses, or the player if they have no mana left
to cast any spell.</p>
<h2 id="part-two"><a href="#part-two">Part two</a></h2>
<p>Same as part one but the player loses one hit point at the very start of every turn.</p>
<h2 id="algorithm"><a href="#algorithm">Algorithm</a></h2>
<p>This uses a <a href="../aoc_search/priority/struct.PrioritySearch.html" title="PrioritySearch"><code>PrioritySearch</code></a> with the amount of mana spent as the priority. Each node is
a combination of the player and boss’s stats, the spells which are continuing to have an
effect and for how long, and whose turn it is. The total amount of mana spent is the distance
or priority.</p>
<p>To work out the next state, we take the existing state and apply any effects. If it is the
player’s turn, we then add a node for every spell which can be cast, or set hit points to zero
if we can’t cast a spell. For the boss’s turn there is only one type of attack so we simply
apply that.</p>
<p>The first state we encounter which shows the player winning is the one which spends the least
amount of mana, since we use that as our priority.</p>
</div></details><h2 id="modules" class="small-section-header"><a href="#modules">Modules</a></h2><div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="mod" href="input/index.html" title="aoc_2015_day_22::input mod">input</a></div><div class="item-right docblock-short">Data structures to model the puzzle input</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="logic/index.html" title="aoc_2015_day_22::logic mod">logic</a></div><div class="item-right docblock-short">Logic for solving the puzzles.</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="model/index.html" title="aoc_2015_day_22::model mod">model</a></div><div class="item-right docblock-short">Representation of the puzzle input, etc.</div></div></div><h2 id="functions" class="small-section-header"><a href="#functions">Functions</a></h2><div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.puzzle_metadata.html" title="aoc_2015_day_22::puzzle_metadata fn">puzzle_metadata</a></div></div></div></section></div></main><div id="rustdoc-vars" data-root-path="../" data-current-crate="aoc_2015_day_22" data-themes="ayu,dark,light" data-resource-suffix="" data-rustdoc-version="1.66.0-nightly (b8b5caee0 2022-10-16)" ></div></body></html>